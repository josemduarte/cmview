<?xml version='1.0'?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
<article id="top" lang="en">

  <title>Manual</title>

  <sect1 id="overview">

    <title>Overview</title>

    <sect2>

      <title>Contact map definition</title>

      <para>CMView is a software tool for visualizing and analyzing the 
      network of contacts between amino acid residues in a protein 
      structure. Formally, this network is a graph where each residue 
      corresponds to a node and two nodes are connected by an edge if 
      and only if the two residues are in contact. Two residues are 
      considered to be in contact if they are spatially close in the 
      three dimensional structure. In CMView the definition of contact 
      is sepcified by two paremeters: the contact type and the distance 
      cutoff. The contact type defines a subset of atoms of the 
      residue. Two residues i and j are then in contact if two atoms 
      out of this subset, one from i and one from j, are not further 
      apart than the distance cutoff. The depiction of the contact 
      network as a matrix (formally, the adjacency matrix of the 
      contact graph) is called a contact map.</para>

    </sect2>

    <sect2>

      <title>Contact types</title>

      <para>The supported contact types are:</para>

      <para>

        <informaltable>

          <tgroup cols="2">

            <tbody>

              <row>

                <entry>AL</entry>

                <entry>All atoms</entry>

              </row>

              <row>

                <entry>BB</entry>

                <entry>All backbone atoms</entry>

              </row>

              <row>

                <entry>SC</entry>

                <entry>All side-chain atoms</entry>

              </row>

              <row>

                <entry>C</entry>

                <entry>The C atom of the backbone</entry>

              </row>

              <row>

                <entry>Ca</entry>

                <entry>The C-alpha atom of the backbone</entry>

              </row>

              <row>

                <entry>Cb</entry>

                <entry>The C-beta atom of the side-chain (C-alpha for 
                glycine)</entry>

              </row>

            </tbody>

          </tgroup>

        </informaltable>

      </para>

    </sect2>

    <sect2>

      <title>Screen elements</title>

      <sect3>

        <title>Contact map window</title>

        <para>CMView shows the contact map of a single polypeptide 
        chain in its main window. A position (i,j) in the contact map 
        corresponds to residues i and j in the sequence of the 
        displayed chain. In the lower left corner information is 
        displayed about the current residue pair (or pairs in compare 
        mode):</para>

        <itemizedlist>

          <listitem>

            <para>The residue numbers of i and j in the sequence</para>

          </listitem>

          <listitem>

            <para>The residue types (in three letter notation)</para>

          </listitem>

          <listitem>

            <para>The secondary structure types (alpha, beta or 
            none)</para>

          </listitem>

          <listitem>

            <para>The PDB residue numbers. These are shown only if a 
            tertiary structure file was loaded. By default, CMView 
            numbers residues by their position in the sequence. This 
            does not necessarily match the numbers assigned to residues 
            in the ATOM lines of PDB files. To compare with other data 
            where the PDB residue numbering is used, the residue 
            numbers as found in the PDB file are printed here.</para>

          </listitem>

        </itemizedlist>

      </sect3>

      <sect3>

        <title>Secondary structure rulers</title>

        <para>The rulers shown above and to the left of the contact map 
        are used for:</para>

        <itemizedlist>

          <listitem>

            <para>Displaying secondary structure elements</para>

          </listitem>

          <listitem>

            <para>Selecting residues (see 
            <link linkend="menu.select.mode">selection 
            modes</link>)</para>

          </listitem>

          <listitem>

            <para>Selecting secondary structure elements (see 
            <link linkend="menu.select.mode">selection 
            modes</link>)</para>

          </listitem>

        </itemizedlist>

        <para>The color scheme for secondary structure elements 
        is:</para>

        <itemizedlist>

          <listitem>

            <para>Blue: Alpha-helix</para>

          </listitem>

          <listitem>

            <para>Red: Beta-sheet</para>

          </listitem>

          <listitem>

            <para>Green: Turn</para>

          </listitem>

        </itemizedlist>

      </sect3>

    </sect2>

  </sect1>

  <sect1 id="functionreference">

    <title>Function Reference</title>

    <sect2 id="menu.file">

      <title>File</title>

      <sect3 id="menu.file.info">

        <title>Info</title>

        <para>Shows information about the currently loaded contact map 
        (or contact maps in compare mode):</para>

        <variablelist>

          <varlistentry>

            <term>Name</term>

            <listitem>

              <para>An identifier for the contact map (usually the PDB 
              four-letter plus chain code if applicable)</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term>Contact type</term>

            <listitem>

              <para>The contact type used when creating the contact 
              map, e.g. Ca, Cb, SC, BB</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term>Distance cutoff</term>

            <listitem>

              <para>The distance cutoff in angstroms used when creating 
              the contact map</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term>Min Seq Sep</term>

            <listitem>

              <para>The minimum sequence separation filter used when 
              creating the contact map</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term>Max Seq Sep</term>

            <listitem>

              <para>The maximum sequence separation filter used when 
              creating the contact map</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term>Sequence</term>

            <listitem>

              <para>The protein sequence. To see the full sequence, 
              hover mouse over the first few letters, or use click the 
              <guibutton>Show sequence</guibutton> button at the 
              bottom.</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term>Sequence length</term>

            <listitem>

              <para>The number of residues in the full protein 
              sequence</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term>Unobserved residues</term>

            <listitem>

              <para>The number of residues for which no 3D coordinates 
              are available</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term>Secondary structure source</term>

            <listitem>

              <para>The source of the secondary structure annotation 
              (author, DSSP or none)</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term>Number of contacts</term>

            <listitem>

              <para>The number of contacts in the contact map</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term>Number of selected contacts</term>

            <listitem>

              <para>The number of contacts currently selected</para>

            </listitem>

          </varlistentry>

        </variablelist>

        <sect4>

          <title>Only in compare mode:</title>

          <variablelist>

            <varlistentry>

              <term>Number of unique contacts</term>

              <listitem>

                <para>The number of contacts unique to this 
                structure</para>

              </listitem>

            </varlistentry>

            <varlistentry>

              <term>Number of common contacts</term>

              <listitem>

                <para>The number of contacts present in both 
                structures</para>

              </listitem>

            </varlistentry>

            <varlistentry>

              <term>Contact map overlap</term>

              <listitem>

                <para>The overlap between the two contact maps measured 
                by the Tanimoto coefficient [1]:</para>

                <para>T(A,B) = common contacts / (contacts(A) + 
                contacts(B) - common contacts)</para>

              </listitem>

            </varlistentry>

          </variablelist>

          <para>[1] Tanimoto, T.T. (1957) IBM Internal Report 17th Nov. 
          1957.</para>

        </sect4>

      </sect3>

      <sect3 id="menu.file.load">

        <title>Load from</title>

        <para>CMView can import two general classes of data 
        files:</para>

        <orderedlist>

          <listitem>

            <para>Tertiary structure files (3D coordinates)</para>

          </listitem>

          <listitem>

            <para>Contact map files</para>

          </listitem>

        </orderedlist>

        <para>For tertiary structure files (e.g. PDB files), a contact 
        map will be calculated from the 3D coordinates using the user 
        specified contact type and distance cutoff, the structure will 
        be automatically loaded into PyMol and the 3D visualization 
        features will be available.</para>

        <para>For contact map files, only the main contact map window 
        will be available.</para>

        <para>CMView contact map files are special in the sense that 
        they store the PDB code of the structure they were derived from 
        (if applicable). When opening a .cm file, the application then 
        tries to retrieve the 3D coordinates from the online PDB.</para>

        <sect4 id="menu.file.load.onlinepdb">

          <title>Load from online PDB</title>

          <para>Loads a structure from the PDB ftp site. The file is 
          downloaded in mmCIF format and cached locally.</para>

        </sect4>

        <sect4>

          <title>Load from PDB file</title>

          <para>Loads a structure from a local PDB file. The file needs 
          to contain an initial HEADER line and one or more ATOM lines 
          following the PDB file specification [1]. Alternatively, 
          files may also follow the <acronym>CASP</acronym> tertiary 
          structure prediction format [2].</para>

          <para>[1] <ulink url="http://www.wwpdb.org/docs.html">
          http://www.wwpdb.org/docs.html</ulink></para>

          <para>[2] 
          <ulink url="http://predictioncenter.org/casp7/doc/casp7-format.html">
          http://predictioncenter.org/casp7/doc/casp7-format.html#TS</ulink></para>

        </sect4>

        <sect4>

          <title>Load from contact map file</title>

          <para>Loads a file in the native CMView contact map file 
          format. A file saved in this format contains some metadata 
          including the PDB-four-letter code of the structure it was 
          derived from (if applicable). The corresponding structure 
          will then be retrieved from the PDB when the file is loaded 
          again.</para>

        </sect4>

        <sect4>

          <title>Load from <acronym>CASP</acronym> RR file</title>

          <para>Loads a contact map in CASP residue-residue contact 
          prediction format.</para>

          <para>See 
          <ulink url="http://predictioncenter.org/casp7/doc/casp7-format.html#RR">
          http://predictioncenter.org/casp7/doc/casp7-format.html#RR</ulink> 
          for the format specification.</para>

        </sect4>

      </sect3>

      <sect3>

        <title>Save to</title>

        <sect4>

          <title>Save to contact map file</title>

          <para>Saves the current contact map in CMView contact map 
          file format. The sequence, the residue-residue contacts and 
          some meta data (original PDB four-letter code and chain code, 
          contact type, distance cutoff) will be stored in the 
          file.</para>

        </sect4>

        <sect4>

          <title>Save to <acronym>CASP</acronym> RR file</title>

          <para>Saves the current contact map in 
          <acronym>CASP</acronym> residue-residue contact prediction 
          format.</para>

          <para>See 
          <ulink url="http://predictioncenter.org/casp7/doc/casp7-format.html#RR">
          http://predictioncenter.org/casp7/doc/casp7-format.html#RR</ulink> 
          for the format specification.</para>

        </sect4>

        <sect4>

          <title>Save to PNG file</title>

          <para>Exports the contents of the main contact map window as 
          a PNG image file.</para>

        </sect4>

        <sect4>

          <title>Save Alignment to file</title>

          <para>Saves the current alignment to a text file in FASTA 
          alignment format. This function is only available in 
          comparison mode.</para>

        </sect4>

      </sect3>

      <sect3>

        <title>Quit</title>

        <para>Closes all windows and exits CMView.</para>

      </sect3>

    </sect2>

    <sect2 id="menu.view">

      <title>View</title>

      <sect3>

        <title>Show contact density</title>

        <para>Displays/hides the contact density map.</para>

        <para>The contact density map shows for every residue pair 
        (i,j) the density of contacts within the backbone fragment 
        ranging from i to j. The density is defined as the number of 
        contacts within the fragment normalized by the average number 
        of contacts over all fragments of the same size. High densities 
        are shown in red, low densities are shown in blue.</para>

        <para>High-density regions often coincide with structural units 
        like domains, secondary- and super-secondary structure 
        elements.</para>

      </sect3>

      <sect3>

        <title>Show distance map</title>

        <para>Displays/hides a distance map showing all pairwise 
        distances between residues.</para>

        <para>Distances are visualized as colors. The color coding 
        depends on the distance cutoff of the current contact map. 
        Distances above the cutoff are shown in blue, distances around 
        the cutoff are shown in green and distances below the cutoff 
        are shown in red, where the darkest blue is the longest 
        distance and the darkest red is the shortest distance. 
        Distances are calculated between C-alpha atoms.</para>

        <para>The distance map can only be calculated if 3D coordinates 
        for the structure are available.</para>

      </sect3>

    </sect2>

    <sect2 id="menu.select">

      <title>Select</title>

      <sect3 id="menu.select.mode">

        <title>Selection modes</title>

        <para>The selection mode defines the mouse behavior for 
        selecting contacts in the main contact map window and in the 
        secondary structure rulers at the left and at the top of the 
        contact map window.</para>

        <sect4 id="menu.select.mode.rect">

          <title>Rectangular selection mode</title>

          <itemizedlist>

            <title>In contact map</title>

            <listitem>

              <para>Drag to select rectangular region of contacts</para>

            </listitem>

            <listitem>

              <para>Drag to select rectangular region of contacts</para>

            </listitem>

            <listitem>

              <para>Click on contact to select single contact</para>

            </listitem>

            <listitem>

              <para>Ctrl+click to add to current selection</para>

            </listitem>

            <listitem>

              <para>Click on white space to reset selection</para>

            </listitem>

          </itemizedlist>

          <itemizedlist>

            <title>In ruler</title>

            <listitem>

              <para>Click on secondary structure element to select the 
              corresponding residues</para>

            </listitem>

            <listitem>

              <para>Drag to select range of residues</para>

            </listitem>

            <listitem>

              <para>Intersection of horizontal and vertical residue 
              selections selects contacts</para>

            </listitem>

          </itemizedlist>

        </sect4>

        <sect4 id="menu.select.mode.fill">

          <title>Fill selection mode</title>

          <itemizedlist>

            <title>In contact map</title>

            <listitem>

              <para>Click on contact to select cluster of 
              contacts</para>

            </listitem>

            <listitem>

              <para>Ctrl+click to add to current selection</para>

            </listitem>

            <listitem>

              <para>Click on white space to reset selection</para>

            </listitem>

          </itemizedlist>

          <itemizedlist>

            <title>In ruler</title>

            <listitem>

              <para>Same behavior as in 
              <link linkend="menu.select.mode.rect">rectangular 
              selection mode</link></para>

            </listitem>

          </itemizedlist>

        </sect4>

        <sect4 id="menu.select.mode.diag">

          <title>Diagonal selection mode</title>

          <itemizedlist>

            <title>In contact map</title>

            <listitem>

              <para>Click to select contacts on current diagonal</para>

            </listitem>

            <listitem>

              <para>Drag to select contacts in several diagonals</para>

            </listitem>

            <listitem>

              <para>Ctrl+click to add to current selection</para>

            </listitem>

            <listitem>

              <para>Click on white space to reset selection</para>

            </listitem>

          </itemizedlist>

          <itemizedlist>

            <title>In ruler</title>

            <listitem>

              <para>Same behavior as in 
              <link linkend="menu.select.mode.rect">rectangular 
              selection mode</link></para>

            </listitem>

          </itemizedlist>

        </sect4>

        <sect4 id="menu.select.mode.nbh">

          <title>Neighborhood selection mode</title>

          <itemizedlist>

            <title>In contact map</title>

            <listitem>

              <para>Click on residue pair (i,j) to select the 
              neighborhoods of i and j, i.e. all contacts made by 
              residue i or residue j.</para>

            </listitem>

            <listitem>

              <para>Click on diagonal to select neighborhood of single 
              residue (This can also be done by clicking in the ruler. 
              See below.)</para>

            </listitem>

            <listitem>

              <para>Ctrl+click to add to current selection</para>

            </listitem>

            <listitem>

              <para>Click on lower left half to reset selection</para>

            </listitem>

          </itemizedlist>

          <itemizedlist>

            <title>In ruler</title>

            <listitem>

              <para>Click on residue to select its neighborhood</para>

            </listitem>

            <listitem>

              <para>Ctrl+click to add to current selection</para>

            </listitem>

          </itemizedlist>

        </sect4>

        <sect4 id="menu.select.mode.color">

          <title>Color selection mode</title>

          <para>Select contacts which have been previously marked with 
          the <link linkend="menu.color.paint">color</link> 
          function.</para>

          <itemizedlist>

            <title>In contact map</title>

            <listitem>

              <para>Click on contact to select all contacts having the 
              same color</para>

            </listitem>

            <listitem>

              <para>Ctrl+click to add to current selection</para>

            </listitem>

            <listitem>

              <para>Click on white space to reset selection</para>

            </listitem>

          </itemizedlist>

          <itemizedlist>

            <title>In ruler</title>

            <listitem>

              <para>Same behavior as in 
              <link linkend="menu.select.mode.rect">rectangular 
              selection mode</link></para>

            </listitem>

          </itemizedlist>

        </sect4>

      </sect3>

      <sect3>

        <title>Select all contacts</title>

        <para>Selects all currently visible contacts.</para>

      </sect3>

      <sect3>

        <title>Select by residue number</title>

        <para>Selects all contacts between elements from a user 
        selected set of residues. The residue set is specified by a 
        selection string. A selection string is a comma separated list 
        of residue numbers and/or residue ranges where a residue range 
        r1-r2 specifies all residues between and including r1 and 
        r2.</para>

        <para>Example: 1,3,5-7,10-12</para>

      </sect3>

      <sect3>

        <title>Select helix-helix contacts</title>

        <para>Selects all contacts between distinct alpha 
        helices.</para>

      </sect3>

      <sect3>

        <title>Select sheet-sheet contacts</title>

        <para>Selects all contacts between distinct beta strands.</para>

      </sect3>

      <sect3>

        <title>Select contacts between secondary structure 
        elements</title>

        <para>Selects all contacts between distinct secondary structure 
        elements.</para>

      </sect3>

      <sect3>

        <title>Select contacts within secondary structure 
        elements</title>

        <para>Selects all contacts between two residues from the same 
        secondary structure element.</para>

      </sect3>

    </sect2>

    <sect2 id="menu.color">

      <title>Color</title>

      <para>Different regions of interest in the contact map can be 
      assigned user-defined colors, e.g. to highlight different domains 
      or a particular functional site.</para>

      <para>See also: <link linkend="menu.select.mode.color">Select by 
      color</link></para>

      <sect3>

        <title>Choose color</title>

        <para>Chooses the active color for coloring contacts using the 
        Paint selection contacts function.</para>

      </sect3>

      <sect3 id="menu.color.paint">

        <title>Color selected contacts</title>

        <para>Assigns the active color to the currently selected 
        contacts</para>

      </sect3>

      <sect3>

        <title>Reset contact colors to black</title>

        <para>Resets all contacts to the default color (black)</para>

      </sect3>

    </sect2>

    <sect2 id="menu.action">

      <title>Action</title>

      <sect3 id="menu.action.show3d">

        <title>Show selected contacts in 3D</title>

        <para>Visualizes the currently selected contacts as edges in 
        the 3D viewer. The edges are drawn between the C-alpha atoms of 
        the residues in contact.</para>

        <para>In single contact map mode, two selection object are 
        created in the 3D viewer:</para>

        <orderedlist>

          <listitem>

            <para>The set of contacts (drawn as solid yellow 
            lines)</para>

          </listitem>

          <listitem>

            <para>The set of residues participating in one of the 
            contacts</para>

          </listitem>

        </orderedlist>

        <para>These selection objects can be manipulated directly in 
        the 3D viewer, for example to change colors or to display 
        side-chain atoms.</para>

        <para>In comparison mode, six contact objects and the 
        corresponding residue selections are created:</para>

        <orderedlist>

          <listitem>

            <para>Contacts in structure A which are present in both 
            structures – drawn as solid yellow lines</para>

          </listitem>

          <listitem>

            <para>Contacts in structure B which are present in both 
            structures – drawn as solid yellow lines</para>

          </listitem>

          <listitem>

            <para>Contacts in structure A which are present only in 
            structure A – drawn as solid pink lines</para>

          </listitem>

          <listitem>

            <para>Contacts in structure B which are present only in 
            structure B – drawn as solid green lines</para>

          </listitem>

          <listitem>

            <para>Pseudo-contacts in structure A (present in B but 
            absent in A) – drawn as dashed pink lines</para>

          </listitem>

          <listitem>

            <para>Pseudo-contacts in structure B (present in A but 
            absent in B) – drawn as dashed green lines</para>

          </listitem>

        </orderedlist>

        <para>Pseudo-contacts means that the distance between the two 
        residues is above the defined distance cutoff. They are shown 
        to allow easier analysis of conformational changes, where 
        contacts have been lost or new contacts have been 
        established.</para>

        <para>Note: In PyMol 1.00 and above, above selections will be 
        grouped together for a better overview. Earlier versions of 
        PyMol do not support this feature.</para>

      </sect3>

      <sect3 id="menu.action.delete">

        <title>Delete selected contacts</title>

        <para>Permanently deletes the currently selected contacts from 
        the contact map.</para>

      </sect3>

    </sect2>

    <sect2 id="menu.compare">

      <title>Compare</title>

      <sect3>

        <title>Load second contact map</title>

        <para>Loads a second contact map (in the following called B) to 
        compare it to the currently open one (A). For the different 
        input options see <link linkend="menu.file.load">Load 
        from</link></para>

        <para>After a second contact map has been loaded, contacts are 
        shown with the following color coding:</para>

        <orderedlist>

          <listitem>

            <para>Black: contacts present in both structure A and 
            structure B</para>

          </listitem>

          <listitem>

            <para>Pink: contacts present in contact map A but absent in 
            B</para>

          </listitem>

          <listitem>

            <para>Green: contacts present in structure B but absent in 
            A</para>

          </listitem>

        </orderedlist>

        <para>To overlay the contact maps, an alignment between the 
        residue of A and B needs to be defined. CMView offers the 
        following options to obtain an alignment:</para>

        <orderedlist>

          <listitem>

            <para>Needleman-Wunsch sequence alignment</para>

            <para>Calculates a global sequence alignment using the 
            classic Needleman-Wunsch-Gotoh algorithm with standard 
            parameters (Matrix: BLOSSUM50, Gap-open: 10, Gap-extend: 
            0.5). The JAligner package [1] is used for the 
            calculation.</para>

          </listitem>

          <listitem>

            <para>Maximum contact map overlap structural 
            alignment</para>

            <para>Calculates a structure based alignment using the SADP 
            algorithm [2]. It applies a very fast heuristic to maximize 
            the contact map overlap between two structures. The 
            algorithm is particularly well suited for aligning contact 
            maps since it can be applied even if no exact 3D 
            coordinates are available.</para>

          </listitem>
		  <listitem>

            <para>DALI structural alignment</para>

            <para>Compute a structural alignment via a locally installed DALILITE[3]. See <ulink url="installation.html">installation</ulink> for 
            instructions to install DALI.</para>

          </listitem>
          
          <listitem>

            <para>Load alignment from FASTA file</para>

            <para>Loads an alignment from a text file in FASTA 
            alignment format. This format can be exported by many 
            standard sequence alignment programs (e.g. Muscle, 
            T-Coffee, EMBOSS, Bioperl).</para>

          </listitem>

        </orderedlist>

        <para>References:</para>

        <para>[1] Ahmed Moustafa, JAligner: Open source Java 
        implementation of Smith-Waterman, 
        http://jaligner.sourceforge.net (2006/03/23).</para>

        <para>[2] Jain, B.J. and M. Lappe (2007). Joining Softassign 
        and Dynamic Programming for the Contact Map Overlap Problem; 
        Springer Lecture Notes in Computer Science, S. Hochreiter and 
        R. Wagner (Eds.): BIRD 2007, LNBI 4414, pp. 410-423. </para>

		<para>[3] Holm, L. and Park, J. (1999). DaliLite workbench for protein structure comparison;
      Bioinformatics 16, 566-567.</para>
        
      </sect3>

      <sect3 id="menu.compare.showcommon">

        <title>Show common contacts</title>

        <para>Shows/hides contacts present in both structure A and 
        structure B.</para>

      </sect3>

      <sect3 id="menu.compare.showfirst">

        <title>Show contacts unique to first structure</title>

        <para>Shows/hides contacts present in contact map A but absent 
        in B (displayed in pink).</para>

      </sect3>

      <sect3 id="menu.compare.showsecond">

        <title>Show contacts unique to second structure</title>

        <para>Shows/hides contacts present in structure B but absent in 
        A (displayed in green).</para>

      </sect3>

      <sect3>

        <title>Show difference map</title>

        <para>Displays/hides the difference distance map of the two 
        structures.</para>

        <para>The difference distance map is a powerful tool to 
        visualize conformational changes between two protein 
        structures. For a pair of residues (i,j) the distance map 
        visualizes how much the distance between i and j has changed 
        from one structure to the other. This highlights regions of 
        conformational change as red hotspots while regions which 
        remain unchanged appear in blue.</para>

        <para>For each pair of residues, the absolute difference 
        between the distance in structure A and the distance in 
        structure B.</para>

        <para>The difference map can only be shown if 3D coordinates 
        for both structures are available.</para>

      </sect3>

      <sect3>

        <title>Superimpose from selection</title>

        <para>Superimposes the structures in the 3D viewer based on the 
        currently selected contacts.</para>

        <para>When two structure are loaded for comparison, they are 
        initially superimposed using an all-residue C-alpha minimum 
        RMSD fit. In such a rigid-body superimposition, some regions 
        may not align well in 3D. This feature allows to select a 
        region of interest and to perform a minimum-RMSD fit only based 
        on the residues participating in the contact selection.</para>

        <para>Note: When changing the orientation of structures in 
        PyMol (e.g. using the custom superposition function), earlier 
        contact objects are not moved with the original structure. 
        There is currently no workaround for this.</para>

      </sect3>

      <sect3>

        <title>Show corresponding residues from selection</title>

        <para>Visualizes aligned residues in the 3D viewer.</para>

        <para>To highlights the correspondence between residues in 
        structure A and structure B, lines are drawn between 
        corresponding residues. This gives a visual three dimensional 
        impression of the underlying alignment.</para>

      </sect3>

    </sect2>

    <sect2 id="menu.help">

      <title>Help</title>

      <sect3>

        <title>Help</title>

        <para>Shows the inline help.</para>

      </sect3>

      <sect3>

        <title>About</title>

        <para>Shows version and licensing information.</para>

      </sect3>

    </sect2>

    <sect2 id="popup">

      <title>Context menu</title>

      <para>Available by right-clicking on the main contact map 
      window.</para>

      <sect3>

        <title>Show residue pair as edge in 3D</title>

        <para>Draws a line in the 3D viewer labeled with the distance 
        between the respective residues in Angstroms. This feature is 
        independent of whether the two residues are in contact or 
        not.</para>

      </sect3>

    </sect2>

    <sect2 id="experimental">

      <title>Experimental features (unsupported)</title>

      <para>Experimental features can be enabled by setting <parameter>
      USE_EXPERIMENTAL_FEATURES = true</parameter> in the config 
      file.</para>

      <sect3>

        <title>Load structure from relational database</title>

        <para>Loads PDB structures from a relational database in 
        PDBase[1] or MSD[2] format.</para>

        <para>[1] 
        <ulink url="http://openmms.sdsc.edu/OpenMMS-1.5.1_Std/openmms/docs/guides/PDBase.html">
        http://openmms.sdsc.edu/OpenMMS-1.5.1_Std/openmms/docs/guides/PDBase.html</ulink></para>

        <para>[2] <ulink url="http://www.ebi.ac.uk/msd-srv/docs/dbdoc/">
        http://www.ebi.ac.uk/msd-srv/docs/dbdoc/</ulink></para>

      </sect3>

      <sect3>

        <title>Load from/save to graph database</title>

        <para>Loads and saves contact maps from/to a simple relational 
        database with tables for graphs, nodes and edges.</para>

      </sect3>

      <sect3>

        <title>Show common neighbor triangles in contact map</title>

        <para>Shows the common neighborhood for a pair of residues as 
        triangles in the contact map.</para>

      </sect3>

      <sect3>

        <title>Show common neighbor triangles in 3D</title>

        <para>Shows the common neighborhood for a pair of residues as 
        triangles in the 3D viewer.</para>

      </sect3>

      <sect3>

        <title>Show common neighborhood size map</title>

        <para>Shows the common neighborhood sizes for all residue pairs 
        as colors in the contact map.</para>

        <para />

      </sect3>

    </sect2>

  </sect1>

  <sect1 id="command line parameters">

    <title>Command line parameters</title>

    <para>The following command line parameters are available when 
    calling CMView from the command line, help can be obtained by 
    calling <command>cmview -h</command>:</para>

    <itemizedlist>

      <listitem>

        <para><command>-p &lt;pdb code&gt;</command>: a 4-letter PDB 
        code to be loaded in CMView from Online PDB (Internet 
        connection required).</para>

      </listitem>

      <listitem>

        <para><command>-f &lt;pdb file&gt;</command>: a local PDB file 
        to be loaded in CMView.</para>

      </listitem>

      <listitem>

        <para><command>-c &lt;chain code&gt;</command>: a PDB chain 
        code. This will be the chain selected either from the PDB file 
        or for the given PDB code. If one is not given then default 
        chain &apos;A&apos; will be chosen.</para>

      </listitem>

      <listitem>

        <para><command>-t &lt;contact type&gt;</command>: the contact 
        type for the Contact Map to be loaded in CMView.</para>

      </listitem>

      <listitem>

        <para><command>-d &lt;distance cutoff&gt;</command>: the 
        distance cutoff for the Contact Map to be loaded in 
        CMView.</para>

      </listitem>

      <listitem>

        <para><command>-o &lt;config file&gt;</command>: a file to read 
        configuration parameters from. See <link linkend="config">
        Configuration</link>.</para>

      </listitem>

      <listitem>

        <para><command>-v</command>: print version and exit.</para>

      </listitem>

      <listitem>

        <para><command>-h</command>: print help on command line 
        parameters and exit.</para>

      </listitem>

    </itemizedlist>

  </sect1>

  <sect1 id="config">

    <title>Configuration</title>

    <sect2>

      <title>Overview</title>

      <para>CMView can be customized using key-value pairs in a 
      configuration file (<filename>cmview.cfg</filename>). The example 
      file contains some commonly used settings. CMView is looking for 
      configuration files:</para>

      <orderedlist>

        <listitem>

          <para>In the current directory</para>

        </listitem>

        <listitem>

          <para>In the user&apos;s home directory</para>

        </listitem>

        <listitem>

          <para>At the location specified with the 
          <link linkend="command line parameters">command line 
          parameter</link> <command>-o</command></para>

        </listitem>

      </orderedlist>

      <para>If the same variable is set in more than one file, the 
      latest value takes precedence according to the above order.</para>

    </sect2>

    <sect2>

      <title>Available configuration parameters</title>

      <variablelist>

        <varlistentry>

          <term><parameter>DEFAULT_CONTACT_TYPE</parameter></term>

          <listitem>

            <para>The contact type shown in the load dialog by default 
            and used for graph generation when loading structures with 
            <link linkend="command line parameters">command line 
            parameters</link> <command>-p</command> or <command>
            -f</command></para>

            <para>Default: Cb</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>DEFAULT_DISTANCE_CUTOFF</parameter></term>

          <listitem>

            <para>The distance cutoff shown in the load dialog by 
            default and used for graph generation when loading 
            structures with <link linkend="command line parameters">
            command line parameters</link> <command>-p</command> or 
            <command>-f</command></para>

            <para>Default: 8.0</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>DEFAULT_MIN_SEQSEP</parameter></term>

          <listitem>

            <para>The minimum sequence separation shown in the load 
            dialog by default, negative values meaning no 
            restraint</para>

            <para>Default: -1</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>DEFAULT_MAX_SEQSEP</parameter></term>

          <listitem>

            <para>The maximum sequence separation shown in the load 
            dialog by default, negative values meaning no 
            restraint</para>

            <para>Default: -1</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>CONFIG_FILE_NAME</parameter></term>

          <listitem>

            <para>The name of the configuration file</para>

            <para>Default: cmview.cfg</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>DIST_MAP_CONTACT_TYPE</parameter></term>

          <listitem>

            <para>The contact type being used to calculate the distance 
            map</para>

            <para>Allowed values: Ca, Cb</para>

            <para>Default: Ca</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>PDB_FTP_URL</parameter></term>

          <listitem>

            <para>A URL where PDB structures are being loaded from. 
            (See <link linkend="menu.file.load.onlinepdb">Load from 
            Online PDB</link>) This can be used to load structures from 
            a local mirrored copy of the PDB</para>

            <para>Default: 
            ftp\://ftp.wwpdb.org/pub/pdb/data/structures/all/mmCIF/</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>TEMP_DIR</parameter></term>

          <listitem>

            <para>The directory for storing temporary files</para>

            <para>Default: The default system temp dir (e.g. <filename>
            /tmp</filename> or <filename>
            C:\Windows\Temp</filename>)</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>INITIAL_SCREEN_SIZE</parameter></term>

          <listitem>

            <para>The initial size in pixels of the main window on 
            startup</para>

            <para>Default: 650</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>SHOW_ICON_BAR</parameter></term>

          <listitem>

            <para>Whether the toolbar with command shortcut icons is 
            shown</para>

            <para>Default: true</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>SHOW_PDB_RES_NUMS</parameter></term>

          <listitem>

            <para>Whether legacy PDB residue numbers are shown in the 
            lower left corner of the contact map below the secondary 
            structure</para>

            <para>Default: true</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>SHOW_RULERS</parameter></term>

          <listitem>

            <para>Whether secondary structure rulers are shown (above 
            and to the left of the contact map)</para>

            <para>Default: true</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>SHOW_ALIGNMENT_COORDS</parameter></term>

          <listitem>

            <para>Whether residue numbers in the alignment are shown in 
            the lower left corner of the contact map (in brackets after 
            the default residue numbers)</para>

            <para>Default: false</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>USE_PYMOL</parameter></term>

          <listitem>

            <para>Whether PyMol specific features should be shown in 
            the menus.</para>

            <para>See also: PYMOL_EXECUTABLE</para>

            <para>Default: true</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>USE_DSSP</parameter></term>

          <listitem>

            <para>Whether DSSP is used for secondary structure 
            assigment from 3D coordinates.</para>

            <para>See also: DSSP_EXECUTABLE</para>

            <para>Default: true</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>DSSP_EXECUTABLE</parameter></term>

          <listitem>

            <para>The path to the local DSSP executable</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>DSSP_PARAMETERS</parameter></term>

          <listitem>

            <para>Parameters passed to DSSP when called by CMView</para>

            <para>Default: --</para>

          </listitem>

        </varlistentry>
		<varlistentry>

          <term><parameter>DALI_EXECUTABLE</parameter></term>

          <listitem>

            <para>Path to the locally installed DALI executable to be used for structural alignments.</para>

            <para>Default: --</para>

          </listitem>

        </varlistentry>
        
        <varlistentry>

          <term><parameter>PYMOL_EXECUTABLE</parameter></term>

          <listitem>

            <para>The path to the local PyMol executable</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>PYMOL_PORT</parameter></term>

          <listitem>

            <para>The port on which the PyMol server is listening to 
            commands</para>

            <para>Default: 9123</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>PYMOL_SHUTDOWN_ON_EXIT</parameter></term>

          <listitem>

            <para>Whether PyMol will be shutdown when CMView is 
            closed</para>

            <para>Default: true</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>PYMOL_LOAD_ON_START</parameter></term>

          <listitem>

            <para>Whether CMView will try to start PyMol on 
            startup</para>

            <para>Default: true</para>

          </listitem>

        </varlistentry>

        <varlistentry>

          <term><parameter>PYMOL_CONN_TIMEOUT</parameter></term>

          <listitem>

            <para>The time in milliseconds that CMView will wait for 
            PyMol to startup before reporting a time out error</para>

            <para>Default: 15000</para>

          </listitem>

        </varlistentry>

      </variablelist>

      <sect3>

        <title>Parameters affecting experimental features</title>

        <variablelist>

          <varlistentry>

            <term>
            <parameter>USE_EXPERIMENTAL_FEATURES</parameter></term>

            <listitem>

              <para>Whether experimental features will be enabled. 
              Experimental features are unsupported, probably not 
              tested and are to be used on your own risk.</para>

              <para>Default: false</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term><parameter>SHOW_WEIGHTED_CONTACTS</parameter></term>

            <listitem>

              <para>Whether contacts with weights between 0 and 1 are 
              shown as shades of grey in the contact map</para>

              <para>Default: true</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term><parameter>USE_DATABASE</parameter></term>

            <listitem>

              <para>Whether database specific features should appear in 
              the menus</para>

              <para>Default: true</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term><parameter>DB_HOST</parameter></term>

            <listitem>

              <para>The database server for structure/graph 
              databases</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term><parameter>DB_PWD</parameter></term>

            <listitem>

              <para>The password for accessing the database</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term><parameter>DB_USER</parameter></term>

            <listitem>

              <para>The username for accessing the database</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term><parameter>DEFAULT_PDB_DB</parameter></term>

            <listitem>

              <para>The default database for loading structures in 
              PDBASE format</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term><parameter>DEFAULT_GRAPH_DB</parameter></term>

            <listitem>

              <para>The default database for loading contact maps</para>

            </listitem>

          </varlistentry>

          <varlistentry>

            <term><parameter>DEFAULT_MSDSD_DB</parameter></term>

            <listitem>

              <para>The default database for loading structures in 
              MSDSD format</para>

            </listitem>

          </varlistentry>

        </variablelist>

      </sect3>

    </sect2>

  </sect1>

</article>

